<h2>Validaciones Reactivas</h2>
<hr>

<div class="row">
    <div class="col">

        <form [formGroup]="miFormulario" (ngSubmit)="crearFormulario()" autocomplete="off">

            <!--Nombre-->
            <div class="row mb-3">
                <label class="col-sm-3 col-form-label">Nombre</label>
                <div class="col-sm-9">

                    <input  type="text"
                            class="form-control"
                            formControlName="nombre"
                            placeholder="Nombre del usuario">
                    
                    <span class="form-text text-danger"
                          *ngIf="campoInvalido( 'nombre' )">
                        Debe ser un nombre y apellido valido 
                    </span>
                </div>
            </div>

            <!--Email-->
            <div class="row mb-3">
                <label class="col-sm-3 col-form-label">Email</label>
                <div class="col-sm-9">

                    <input  type="email"
                            class="form-control"
                            formControlName="email"
                            placeholder="Email del usuario">

                    <span class="form-text text-danger"
                          *ngIf="campoInvalido( 'email' )">
                        {{ emailErrorMsg }}
                    </span>
                </div>
            </div>

            <!--Username-->
            <div class="row mb-3">
                <label class="col-sm-3 col-form-label">Username</label>
                <div class="col-sm-9">

                    <input  type="text"
                            class="form-control"
                            formControlName="username"
                            placeholder="Username del usuario">
                    
                    <span class="form-text text-danger"
                            *ngIf="campoInvalido( 'username' )">
                        El username ya existe
                     </span>
                </div>
            </div>

            <!--Password-->
            <div class="row mb-3">
                <label class="col-sm-3 col-form-label">Contraseña</label>
                <div class="col-sm-9">

                    <input  type="password"
                            class="form-control"
                            formControlName="contraseña"
                            placeholder="Contraseña del usuario">

                    <span class="form-text text-danger"
                          *ngIf="campoInvalido( 'contraseña' )">
                        La contraseña debe ser mayor de 6 caracteres
                    </span>
                    
                </div>
            </div>

            <!--Confirmar Password-->
            <div class="row mb-3">
                <label class="col-sm-3 col-form-label">Confirmar Contraseña</label>
                <div class="col-sm-9">

                    <input  type="password"
                            class="form-control"
                            formControlName="confirmar"
                            placeholder="Confirmar contraseña">
                    
                    <span class="form-text text-danger"
                          *ngIf="campoInvalido( 'confirmar' )">
                        Las contraseñas no coinciden
                    </span>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-3 col-form-label">Fecha</label>
                <div class="col">

                    <input type="date"
                            class="form-control"
                            formControlName="fecha"
                            (change)='verFecha()'>

                </div>
            </div>

            <div class="row">
                <div class="col">

                    <button class="btn btn-dark float-end"
                            [disabled]="miFormulario.pending"
                            type="submit">
                        Crear
                    </button>

                </div>
            </div>

        </form>

    </div>
</div>

<h2>Form Valid: {{ miFormulario.valid }}</h2>
<h2>Form Status: {{ miFormulario.status }}</h2>
<h2>Form Errors</h2>
<pre> {{miFormulario.errors | json}} </pre>

<h2>Nombre</h2>
<pre> {{miFormulario.controls.nombre.errors | json}} </pre>

<h2>Email</h2>
<pre> {{miFormulario.controls.email.errors | json}} </pre>

<h2>Username</h2>
<pre> {{miFormulario.controls.username.errors | json}} </pre>

<h2>Confirmar contraseña</h2>
<pre> {{miFormulario.controls.confirmar.errors | json}} </pre>

<h2>Fecha</h2>
<pre> {{miFormulario.controls.fecha.value | json}} </pre>